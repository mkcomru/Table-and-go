# Table&Go - Система бронирования столиков в ресторанах

Table&Go — это веб-приложение для бронирования столиков в ресторанах и барах. Система позволяет пользователям просматривать заведения, бронировать столики, оставлять отзывы, а администраторам ресторанов — управлять бронированиями.

## Содержание

- [Требования](#требования)
- [Установка](#установка)
- [Запуск проекта](#запуск-проекта)
- [Структура проекта](#структура-проекта)
- [Функциональность](#функциональность)
- [API](#api)

## Требования

- Python 3.10+
- Node.js (опционально, для запуска фронтенда)
- Docker (для Redis)
- PostgreSQL (опционально, можно использовать SQLite)

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/mkcomru/Table-and-go
cd table_and_go
```

### 2. Настройка бэкенда

#### Создание и активация виртуального окружения

**Windows:**
```bash
cd backend
python -m venv venv
venv\Scripts\activate
```

**Linux/macOS:**
```bash
cd backend
python3 -m venv venv
source venv/bin/activate
```

#### Установка зависимостей

```bash
pip install -r requirements.txt
```

#### Настройка базы данных

По умолчанию проект использует SQLite. Если вы хотите использовать PostgreSQL, создайте файл `.env` в корне проекта со следующими параметрами:

```
DB_NAME=table_and_go
DB_USER=postgres
DB_PASSWORD=your_password
DB_HOST=localhost
DB_PORT=5432
```

#### Применение миграций

```bash
python manage.py migrate
```

#### Создание суперпользователя (опционально)

```bash
python manage.py createsuperuser
```

### 3. Настройка Redis (для Celery)

Redis используется для работы с очередями задач Celery. Запустите Redis с помощью Docker:

```bash
docker run -d -p 6379:6379 --name redis redis:latest
```

## Запуск проекта

### 1. Запуск бэкенда

В директории `backend` выполните:

```bash
python manage.py runserver
```

Сервер будет доступен по адресу: http://127.0.0.1:8000/

### 2. Запуск Celery (для фоновых задач)

В отдельном терминале, в директории `backend`:

**Windows:**
```bash
celery -A core worker --pool=solo -l info
```

**Linux/macOS:**
```bash
celery -A core worker -l info
```

### 3. Запуск фронтенда

В директории `frontend`:

**Windows:**
```bash
.\server.bat
```

**Linux/macOS:**
```bash
python3 -m http.server 8080
```

Фронтенд будет доступен по адресу: http://localhost:8080/

## Структура проекта

### Бэкенд (Django)

- `core/` - основные настройки проекта
- `api/` - общие API-эндпоинты
- `users/` - управление пользователями и аутентификацией
- `establishments/` - управление ресторанами и заведениями
- `bookings/` - система бронирования столиков
- `reviews/` - система отзывов

### Фронтенд (HTML/CSS/JavaScript)

- `index.html` - главная страница
- `restaurant.html` - страница ресторана
- `profile.html` - профиль пользователя
- `profile-restaurant.html` - панель администратора ресторана
- `admin-panel.html` - панель системного администратора
- `js/` - JavaScript файлы
- `css/` - стили CSS
- `assets/` - изображения и другие статические файлы

## Функциональность

### Для пользователей:
- Регистрация и авторизация
- Просмотр списка ресторанов
- Бронирование столиков
- Управление своими бронированиями
- Оставление отзывов

### Для администраторов ресторанов:
- Управление информацией о ресторане
- Просмотр и управление бронированиями
- Ответы на отзывы

### Для системных администраторов:
- Полный доступ ко всем разделам системы
- Управление пользователями
- Модерация контента

## API

Основные эндпоинты API:

- `/auth/register/` - регистрация пользователя
- `/auth/login/` - авторизация
- `/auth/me/` - информация о текущем пользователе
- `/auth/update/` - обновление профиля
- `/api/establishments/` - список заведений
- `/api/establishments/<id>/` - информация о заведении
- `/api/branch/<id>/bookings/` - бронирования филиала
- `/api/bookings/` - список бронирований пользователя
- `/api/reviews/` - отзывы пользователя


